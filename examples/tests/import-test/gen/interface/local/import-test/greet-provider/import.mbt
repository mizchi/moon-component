// Generated by moon-component
// Import module: local:import-test/greet-provider

///| Low-level FFI import
fn ffi_get_greeting(p0_ptr : Int, p0_len : Int, retptr : Int) -> Int = "local:import-test/greet-provider" "get-greeting"

///| High-level wrapper with canonical ABI conversion
pub fn get_greeting(name : String) -> String {
  let (p0_ptr, p0_len) = @cabi.cabi_lower_string(name)
  let retptr = @cabi.cabi_realloc(0, 0, 4, 8)
  let _ = ffi_get_greeting(p0_ptr, p0_len, retptr)
  let result_ptr = @cabi.cabi_read_i32(retptr)
  let result_len = @cabi.cabi_read_i32(retptr + 4)
  @cabi.cabi_lift_string(result_ptr, result_len)
}

