// Generated by moon-component
// Import module: local:regex/regex

///| Low-level FFI import
fn ffi_is_match(p0_ptr : Int, p0_len : Int, p1_ptr : Int, p1_len : Int) -> Int = "local:regex/regex" "is-match"

///| High-level wrapper with canonical ABI conversion
pub fn is_match(pattern : String, text : String) -> Bool {
  let (p0_ptr, p0_len) = @cabi.cabi_lower_string(pattern)
  let (p1_ptr, p1_len) = @cabi.cabi_lower_string(text)
  let result = ffi_is_match(p0_ptr, p0_len, p1_ptr, p1_len)
  result != 0
}

///| Low-level FFI import
fn ffi_replace(p0_ptr : Int, p0_len : Int, p1_ptr : Int, p1_len : Int, p2_ptr : Int, p2_len : Int, retptr : Int) -> Int = "local:regex/regex" "replace"

///| High-level wrapper with canonical ABI conversion
pub fn replace(pattern : String, text : String, replacement : String) -> String {
  let (p0_ptr, p0_len) = @cabi.cabi_lower_string(pattern)
  let (p1_ptr, p1_len) = @cabi.cabi_lower_string(text)
  let (p2_ptr, p2_len) = @cabi.cabi_lower_string(replacement)
  let retptr = @cabi.cabi_realloc(0, 0, 4, 8)
  let _ = ffi_replace(p0_ptr, p0_len, p1_ptr, p1_len, p2_ptr, p2_len, retptr)
  let result_ptr = @cabi.cabi_read_i32(retptr)
  let result_len = @cabi.cabi_read_i32(retptr + 4)
  @cabi.cabi_lift_string(result_ptr, result_len)
}

